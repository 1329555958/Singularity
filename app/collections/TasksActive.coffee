Collection = require './collection'

Tasks = require './Tasks'

MOCK_JSON = [{"taskRequest":{"request":{"command":null,"name":"WaterfallPersister-singularity-waterfall-persister","executor":"/home/tpetr/mesos/bin/hubspot-mesos-executor","resources":{"cpus":1,"memoryMb":512,"numPorts":0},"schedule":"0 */1 * * * ?","instances":1,"daemon":false,"env":null,"uris":null,"executorData":{"cmd":"hadoop jar $JOB_JAR $RUNNER_CLASS -waterfall-puller -s3 -mt -rn waterfall-puller -an $BUCKET -osp $BUCKET -pl waterfall-puller -ik -iv 900 -nr $NUM_REDUCERS -hb -ch 1000","uris":["http://hubspot.com.s3.amazonaws.com/build_artifacts/Waterfall/Waterfall-1028-2013-11-07_13-55-15.tar.gz?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415743912&Signature=YYOh1CCNHy3LQYiqftMvueO3tB4%3D","http://hubspot.deploy.config.s3.amazonaws.com/WaterfallPersister-singularity/1028/1384207911453/config.yaml?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415743912&Signature=OQPCmz6MAmfRPE40MXLDL94CJHw%3D"],"env":{"DEPLOY_PROJECT_NAME":"WaterfallPersister-singularity","DEPLOY_USER":"tpetr@hubspot.com","DEPLOY_ID":"360e9df4-0b2b-4467-b4c7-4b0f1228b503","DEPLOY_TIME":"1384207912712"}},"rackSensitive":null},"pendingTaskId":{"name":"WaterfallPersister-singularity-waterfall-persister","nextRunAt":1384306440000,"instanceNo":1}},"taskId":{"name":"WaterfallPersister-singularity-waterfall-persister","instanceNo":1,"rackId":"us-east-1e","startedAt":1384306440691},"offer":{"id":{"value":"201311111611-3792629514-5050-11268-119310"},"frameworkId":{"value":"Singularity_6"},"slaveId":{"value":"201311111611-3792629514-5050-11268-3"},"hostname":"nicholas.iad01.hubspot-networks.net","resources":[{"name":"cpus","type":"SCALAR","scalar":{"value":18.0},"role":"*"},{"name":"mem","type":"SCALAR","scalar":{"value":4915.0},"role":"*"},{"name":"disk","type":"SCALAR","scalar":{"value":418176.0},"role":"*"},{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31008,"end":32000}]},"role":"*"}],"executorIds":[{"value":"singularity-WaterfallService:1028:web:1384198454854-1384198457700-1-useast1e"},{"value":"singularity-KumongaService:2665:web:1384190786065-1384190786908-1-useast1e"}],"attributes":[{"name":"rackid","type":"TEXT","text":{"value":"us-east-1e"}}]},"task":{"name":"WaterfallPersister-singularity-waterfall-persister","taskId":{"value":"WaterfallPersister-singularity-waterfall-persister-1384306440691-1-useast1e"},"slaveId":{"value":"201311111611-3792629514-5050-11268-3"},"resources":[{"name":"cpus","type":"SCALAR","scalar":{"value":1.0}},{"name":"mem","type":"SCALAR","scalar":{"value":512.0}}],"executor":{"executorId":{"value":"singularity-WaterfallPersister-singularity-waterfall-persister-1384306440691-1-useast1e"},"command":{"value":"/home/tpetr/mesos/bin/hubspot-mesos-executor","uris":[]},"resources":[]},"data":"eyJjbWQiOiJoYWRvb3AgamFyICRKT0JfSkFSICRSVU5ORVJfQ0xBU1MgLXdhdGVyZmFsbC1wdWxsZXIgLXMzIC1tdCAtcm4gd2F0ZXJmYWxsLXB1bGxlciAtYW4gJEJVQ0tFVCAtb3NwICRCVUNLRVQgLXBsIHdhdGVyZmFsbC1wdWxsZXIgLWlrIC1pdiA5MDAgLW5yICROVU1fUkVEVUNFUlMgLWhiIC1jaCAxMDAwIiwidXJpcyI6WyJodHRwOi8vaHVic3BvdC5jb20uczMuYW1hem9uYXdzLmNvbS9idWlsZF9hcnRpZmFjdHMvV2F0ZXJmYWxsL1dhdGVyZmFsbC0xMDI4LTIwMTMtMTEtMDdfMTMtNTUtMTUudGFyLmd6P0FXU0FjY2Vzc0tleUlkPTFKQlBWUjNaUktZUlREUDZTNEcyJkV4cGlyZXM9MTQxNTc0MzkxMiZTaWduYXR1cmU9WVlPaDFDQ05IeTNMUVlpcWZ0TXZ1ZU8zdEI0JTNEIiwiaHR0cDovL2h1YnNwb3QuZGVwbG95LmNvbmZpZy5zMy5hbWF6b25hd3MuY29tL1dhdGVyZmFsbFBlcnNpc3Rlci1zaW5ndWxhcml0eS8xMDI4LzEzODQyMDc5MTE0NTMvY29uZmlnLnlhbWw/QVdTQWNjZXNzS2V5SWQ9MUpCUFZSM1pSS1lSVERQNlM0RzImRXhwaXJlcz0xNDE1NzQzOTEyJlNpZ25hdHVyZT1PUVBDbXo2TUFtZlJQRTQwTVhMREw5NENKSHclM0QiXSwiZW52Ijp7IkRFUExPWV9QUk9KRUNUX05BTUUiOiJXYXRlcmZhbGxQZXJzaXN0ZXItc2luZ3VsYXJpdHkiLCJERVBMT1lfVVNFUiI6InRwZXRyQGh1YnNwb3QuY29tIiwiREVQTE9ZX0lEIjoiMzYwZTlkZjQtMGIyYi00NDY3LWI0YzctNGIwZjEyMjhiNTAzIiwiREVQTE9ZX1RJTUUiOiIxMzg0MjA3OTEyNzEyIn19"}},{"taskRequest":{"request":{"command":null,"name":"deployer_ui:80:web:1384190642340","executor":"/home/tpetr/mesos/bin/hubspot-mesos-executor","resources":{"cpus":1,"memoryMb":512,"numPorts":3},"schedule":null,"instances":1,"daemon":true,"env":null,"uris":null,"executorData":{"cmd":"node server.js","uris":["http://hubspot.com.s3.amazonaws.com/build_artifacts/DeployerUI/DeployerUI-80-2013-11-10_14-00-09.tar.gz?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415726642&Signature=1co8P030OWAk9J5nawW7Y5b3vL4%3D","http://hubspot.deploy.config.s3.amazonaws.com/DeployerUI/80/config.yaml?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415726642&Signature=aieVAm3wgG7riJo45mYB0bI3NZw%3D"],"env":{"DEPLOY_PROJECT_NAME":"deployer_ui","DEPLOY_USER":"tpetr@hubspot.com","DEPLOY_ID":"d58eaabf-8fef-466e-b3ac-af65a28f34c4","DEPLOY_TIME":"1384190642542"},"ports":[31020,31021,31022]},"rackSensitive":null},"pendingTaskId":{"name":"deployer_ui:80:web:1384190642340","nextRunAt":1384190643768,"instanceNo":1}},"taskId":{"name":"deployer_ui:80:web:1384190642340","instanceNo":1,"rackId":"us-east-1b","startedAt":1384190644771},"offer":{"id":{"value":"201311111611-3792629514-5050-11268-2127"},"frameworkId":{"value":"Singularity_6"},"slaveId":{"value":"201311111611-3792629514-5050-11268-1"},"hostname":"hodge.iad01.hubspot-networks.net","resources":[{"name":"cpus","type":"SCALAR","scalar":{"value":16.0},"role":"*"},{"name":"mem","type":"SCALAR","scalar":{"value":3891.0},"role":"*"},{"name":"disk","type":"SCALAR","scalar":{"value":418176.0},"role":"*"},{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31020,"end":32000},{"begin":31000,"end":31003}]},"role":"*"}],"executorIds":[{"value":"singularity-WaterfallService:1028:web:1384188715142-1384188722151-1-useast1b"},{"value":"singularity-deployer_ui:80:web:1384113946012-1384186980968-1-useast1b"},{"value":"singularity-KumongaService:2657:web:1384034398579-1384186974942-1-useast1b"},{"value":"singularity-marathon_test:1242:web:1383939443165-1384186962937-1-useast1b"}],"attributes":[{"name":"rackid","type":"TEXT","text":{"value":"us-east-1b"}}]},"task":{"name":"deployer_ui:80:web:1384190642340","taskId":{"value":"deployer_ui:80:web:1384190642340-1384190644771-1-useast1b"},"slaveId":{"value":"201311111611-3792629514-5050-11268-1"},"resources":[{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31020,"end":31023}]}},{"name":"cpus","type":"SCALAR","scalar":{"value":1.0}},{"name":"mem","type":"SCALAR","scalar":{"value":512.0}}],"executor":{"executorId":{"value":"singularity-deployer_ui:80:web:1384190642340-1384190644771-1-useast1b"},"command":{"value":"/home/tpetr/mesos/bin/hubspot-mesos-executor","uris":[]},"resources":[]},"data":"eyJjbWQiOiJub2RlIHNlcnZlci5qcyIsInVyaXMiOlsiaHR0cDovL2h1YnNwb3QuY29tLnMzLmFtYXpvbmF3cy5jb20vYnVpbGRfYXJ0aWZhY3RzL0RlcGxveWVyVUkvRGVwbG95ZXJVSS04MC0yMDEzLTExLTEwXzE0LTAwLTA5LnRhci5nej9BV1NBY2Nlc3NLZXlJZD0xSkJQVlIzWlJLWVJURFA2UzRHMiZFeHBpcmVzPTE0MTU3MjY2NDImU2lnbmF0dXJlPTFjbzhQMDMwT1dBazlKNW5hd1c3WTViM3ZMNCUzRCIsImh0dHA6Ly9odWJzcG90LmRlcGxveS5jb25maWcuczMuYW1hem9uYXdzLmNvbS9EZXBsb3llclVJLzgwL2NvbmZpZy55YW1sP0FXU0FjY2Vzc0tleUlkPTFKQlBWUjNaUktZUlREUDZTNEcyJkV4cGlyZXM9MTQxNTcyNjY0MiZTaWduYXR1cmU9YWllVkFtM3dnRzdyaUpvNDVtWUIwYkkzTlp3JTNEIl0sImVudiI6eyJERVBMT1lfUFJPSkVDVF9OQU1FIjoiZGVwbG95ZXJfdWkiLCJERVBMT1lfVVNFUiI6InRwZXRyQGh1YnNwb3QuY29tIiwiREVQTE9ZX0lEIjoiZDU4ZWFhYmYtOGZlZi00NjZlLWIzYWMtYWY2NWEyOGYzNGM0IiwiREVQTE9ZX1RJTUUiOiIxMzg0MTkwNjQyNTQyIn0sInBvcnRzIjpbMzEwMjAsMzEwMjEsMzEwMjJdfQ=="}},{"taskRequest":{"request":{"command":null,"name":"KumongaService:2665:web:1384190786065","executor":"/home/tpetr/mesos/bin/hubspot-mesos-executor","resources":{"cpus":1,"memoryMb":512,"numPorts":3},"schedule":null,"instances":1,"daemon":true,"env":null,"uris":null,"executorData":{"cmd":"java -Xmx1024m -jar ./KumongaService/target/KumongaService-1.0-SNAPSHOT.jar server $CONFIG_YAML","uris":["http://hubspot.com.s3.amazonaws.com/build_artifacts/Kumonga/Kumonga-2665-2013-11-11_03-33-56.tar.gz?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415726786&Signature=gQeEh1iTue0iQ1yeNZeSm6vBGxg%3D","http://hubspot.deploy.config.s3.amazonaws.com/Kumonga/2665/config.yaml?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415726786&Signature=NCVvWmWBI%2BCUrbZu9MhEnjGYbjI%3D"],"env":{"DEPLOY_PROJECT_NAME":"KumongaService","DEPLOY_USER":"tpetr@hubspot.com","DEPLOY_ID":"46549fca-cc34-4638-a3e8-c738afbb4095","DEPLOY_TIME":"1384190786252"},"ports":[31000,31001,31002]},"rackSensitive":null},"pendingTaskId":{"name":"KumongaService:2665:web:1384190786065","nextRunAt":1384190786901,"instanceNo":1}},"taskId":{"name":"KumongaService:2665:web:1384190786065","instanceNo":1,"rackId":"us-east-1e","startedAt":1384190786908},"offer":{"id":{"value":"201311111611-3792629514-5050-11268-2296"},"frameworkId":{"value":"Singularity_6"},"slaveId":{"value":"201311111611-3792629514-5050-11268-3"},"hostname":"nicholas.iad01.hubspot-networks.net","resources":[{"name":"cpus","type":"SCALAR","scalar":{"value":20.0},"role":"*"},{"name":"mem","type":"SCALAR","scalar":{"value":5939.0},"role":"*"},{"name":"disk","type":"SCALAR","scalar":{"value":418176.0},"role":"*"},{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31000,"end":32000}]},"role":"*"}],"attributes":[{"name":"rackid","type":"TEXT","text":{"value":"us-east-1e"}}],"executorIds":[]},"task":{"name":"KumongaService:2665:web:1384190786065","taskId":{"value":"KumongaService:2665:web:1384190786065-1384190786908-1-useast1e"},"slaveId":{"value":"201311111611-3792629514-5050-11268-3"},"resources":[{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31000,"end":31003}]}},{"name":"cpus","type":"SCALAR","scalar":{"value":1.0}},{"name":"mem","type":"SCALAR","scalar":{"value":512.0}}],"executor":{"executorId":{"value":"singularity-KumongaService:2665:web:1384190786065-1384190786908-1-useast1e"},"command":{"value":"/home/tpetr/mesos/bin/hubspot-mesos-executor","uris":[]},"resources":[]},"data":"eyJjbWQiOiJqYXZhIC1YbXgxMDI0bSAtamFyIC4vS3Vtb25nYVNlcnZpY2UvdGFyZ2V0L0t1bW9uZ2FTZXJ2aWNlLTEuMC1TTkFQU0hPVC5qYXIgc2VydmVyICRDT05GSUdfWUFNTCIsInVyaXMiOlsiaHR0cDovL2h1YnNwb3QuY29tLnMzLmFtYXpvbmF3cy5jb20vYnVpbGRfYXJ0aWZhY3RzL0t1bW9uZ2EvS3Vtb25nYS0yNjY1LTIwMTMtMTEtMTFfMDMtMzMtNTYudGFyLmd6P0FXU0FjY2Vzc0tleUlkPTFKQlBWUjNaUktZUlREUDZTNEcyJkV4cGlyZXM9MTQxNTcyNjc4NiZTaWduYXR1cmU9Z1FlRWgxaVR1ZTBpUTF5ZU5aZVNtNnZCR3hnJTNEIiwiaHR0cDovL2h1YnNwb3QuZGVwbG95LmNvbmZpZy5zMy5hbWF6b25hd3MuY29tL0t1bW9uZ2EvMjY2NS9jb25maWcueWFtbD9BV1NBY2Nlc3NLZXlJZD0xSkJQVlIzWlJLWVJURFA2UzRHMiZFeHBpcmVzPTE0MTU3MjY3ODYmU2lnbmF0dXJlPU5DVnZXbVdCSSUyQkNVcmJadTlNaEVuakdZYmpJJTNEIl0sImVudiI6eyJERVBMT1lfUFJPSkVDVF9OQU1FIjoiS3Vtb25nYVNlcnZpY2UiLCJERVBMT1lfVVNFUiI6InRwZXRyQGh1YnNwb3QuY29tIiwiREVQTE9ZX0lEIjoiNDY1NDlmY2EtY2MzNC00NjM4LWEzZTgtYzczOGFmYmI0MDk1IiwiREVQTE9ZX1RJTUUiOiIxMzg0MTkwNzg2MjUyIn0sInBvcnRzIjpbMzEwMDAsMzEwMDEsMzEwMDJdfQ=="}},{"taskRequest":{"request":{"command":null,"name":"hspypi_web:316:web:1384190273465","executor":"/home/tpetr/mesos/bin/hubspot-mesos-executor","resources":{"cpus":1,"memoryMb":512,"numPorts":3},"schedule":null,"instances":1,"daemon":true,"env":null,"uris":null,"executorData":{"cmd":"./start_gunicorn hspypi_web.settings","uris":["http://hubspot.com.s3.amazonaws.com/build_artifacts/hspypi_web/hspypi_web-316-2013-11-10_13-36-37.tar.gz?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415726273&Signature=RFQZGXDoNbrEgnpRp%2FqdAvh4xjQ%3D","http://hubspot.deploy.config.s3.amazonaws.com/hspypi_web/316/config.yaml?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415726273&Signature=xC7eRb6mgWT4t9ewVTX685yfxJs%3D"],"env":{"DEPLOY_PROJECT_NAME":"hspypi_web","DEPLOY_USER":"tpetr@hubspot.com","DEPLOY_ID":"b0ed7f8f-16a6-431c-bfda-67903cf5b995","DEPLOY_TIME":"1384190273744"},"ports":[31000,31001,31002]},"rackSensitive":null},"pendingTaskId":{"name":"hspypi_web:316:web:1384190273465","nextRunAt":1384190276437,"instanceNo":1}},"taskId":{"name":"hspypi_web:316:web:1384190273465","instanceNo":1,"rackId":"us-east-1b","startedAt":1384190276443},"offer":{"id":{"value":"201311111611-3792629514-5050-11268-1698"},"frameworkId":{"value":"Singularity_6"},"slaveId":{"value":"201311111611-3792629514-5050-11268-4"},"hostname":"mugu.iad01.hubspot-networks.net","resources":[{"name":"cpus","type":"SCALAR","scalar":{"value":20.0},"role":"*"},{"name":"mem","type":"SCALAR","scalar":{"value":5939.0},"role":"*"},{"name":"disk","type":"SCALAR","scalar":{"value":418176.0},"role":"*"},{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31000,"end":32000}]},"role":"*"}],"attributes":[{"name":"rackid","type":"TEXT","text":{"value":"us-east-1b"}}],"executorIds":[]},"task":{"name":"hspypi_web:316:web:1384190273465","taskId":{"value":"hspypi_web:316:web:1384190273465-1384190276443-1-useast1b"},"slaveId":{"value":"201311111611-3792629514-5050-11268-4"},"resources":[{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31000,"end":31003}]}},{"name":"cpus","type":"SCALAR","scalar":{"value":1.0}},{"name":"mem","type":"SCALAR","scalar":{"value":512.0}}],"executor":{"executorId":{"value":"singularity-hspypi_web:316:web:1384190273465-1384190276443-1-useast1b"},"command":{"value":"/home/tpetr/mesos/bin/hubspot-mesos-executor","uris":[]},"resources":[]},"data":"eyJjbWQiOiIuL3N0YXJ0X2d1bmljb3JuIGhzcHlwaV93ZWIuc2V0dGluZ3MiLCJ1cmlzIjpbImh0dHA6Ly9odWJzcG90LmNvbS5zMy5hbWF6b25hd3MuY29tL2J1aWxkX2FydGlmYWN0cy9oc3B5cGlfd2ViL2hzcHlwaV93ZWItMzE2LTIwMTMtMTEtMTBfMTMtMzYtMzcudGFyLmd6P0FXU0FjY2Vzc0tleUlkPTFKQlBWUjNaUktZUlREUDZTNEcyJkV4cGlyZXM9MTQxNTcyNjI3MyZTaWduYXR1cmU9UkZRWkdYRG9OYnJFZ25wUnAlMkZxZEF2aDR4alElM0QiLCJodHRwOi8vaHVic3BvdC5kZXBsb3kuY29uZmlnLnMzLmFtYXpvbmF3cy5jb20vaHNweXBpX3dlYi8zMTYvY29uZmlnLnlhbWw/QVdTQWNjZXNzS2V5SWQ9MUpCUFZSM1pSS1lSVERQNlM0RzImRXhwaXJlcz0xNDE1NzI2MjczJlNpZ25hdHVyZT14QzdlUmI2bWdXVDR0OWV3VlRYNjg1eWZ4SnMlM0QiXSwiZW52Ijp7IkRFUExPWV9QUk9KRUNUX05BTUUiOiJoc3B5cGlfd2ViIiwiREVQTE9ZX1VTRVIiOiJ0cGV0ckBodWJzcG90LmNvbSIsIkRFUExPWV9JRCI6ImIwZWQ3ZjhmLTE2YTYtNDMxYy1iZmRhLTY3OTAzY2Y1Yjk5NSIsIkRFUExPWV9USU1FIjoiMTM4NDE5MDI3Mzc0NCJ9LCJwb3J0cyI6WzMxMDAwLDMxMDAxLDMxMDAyXX0="}},{"taskRequest":{"request":{"command":null,"name":"tqdash_web:94:web:1384108270295","executor":"/home/tpetr/mesos/bin/hubspot-mesos-executor","resources":{"cpus":1,"memoryMb":512,"numPorts":3},"schedule":null,"instances":1,"daemon":true,"env":null,"uris":null,"executorData":{"cmd":"./start_gunicorn tqdash_web.settings","uris":["http://hubspot.com.s3.amazonaws.com/build_artifacts/tqdash_web_proc/tqdash_web_proc-94-2013-11-10_13-23-48.tar.gz?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415644270&Signature=XySOWdFv0klLMzYdb2ZqXEfcNhI%3D","http://hubspot.deploy.config.s3.amazonaws.com/tqdash_web_proc/94/config.yaml?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415644270&Signature=uUjoj9OILfJbWmTLMQgC7Z5kZP0%3D"],"env":{"DEPLOY_PROJECT_NAME":"tqdash_web","DEPLOY_USER":"tpetr@hubspot.com"},"ports":[31024,31025,31026]},"rackSensitive":null},"pendingTaskId":{"name":"tqdash_web:94:web:1384108270295","nextRunAt":1384199945646,"instanceNo":1}},"taskId":{"name":"tqdash_web:94:web:1384108270295","instanceNo":1,"rackId":"us-east-1b","startedAt":1384199945995},"offer":{"id":{"value":"201311111611-3792629514-5050-11268-12710"},"frameworkId":{"value":"Singularity_6"},"slaveId":{"value":"201311111611-3792629514-5050-11268-1"},"hostname":"hodge.iad01.hubspot-networks.net","resources":[{"name":"cpus","type":"SCALAR","scalar":{"value":17.0},"role":"*"},{"name":"mem","type":"SCALAR","scalar":{"value":4403.0},"role":"*"},{"name":"disk","type":"SCALAR","scalar":{"value":418176.0},"role":"*"},{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31024,"end":32000},{"begin":31008,"end":31019}]},"role":"*"}],"executorIds":[{"value":"singularity-WaterfallService:1028:web:1384198454854-1384198457753-2-useast1b"},{"value":"singularity-deployer_ui:80:web:1384190642340-1384190644771-1-useast1b"},{"value":"singularity-marathon_test:1259:web:1384190886412-1384190890006-1-useast1b"}],"attributes":[{"name":"rackid","type":"TEXT","text":{"value":"us-east-1b"}}]},"task":{"name":"tqdash_web:94:web:1384108270295","taskId":{"value":"tqdash_web:94:web:1384108270295-1384199945995-1-useast1b"},"slaveId":{"value":"201311111611-3792629514-5050-11268-1"},"resources":[{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31024,"end":31027}]}},{"name":"cpus","type":"SCALAR","scalar":{"value":1.0}},{"name":"mem","type":"SCALAR","scalar":{"value":512.0}}],"executor":{"executorId":{"value":"singularity-tqdash_web:94:web:1384108270295-1384199945995-1-useast1b"},"command":{"value":"/home/tpetr/mesos/bin/hubspot-mesos-executor","uris":[]},"resources":[]},"data":"eyJjbWQiOiIuL3N0YXJ0X2d1bmljb3JuIHRxZGFzaF93ZWIuc2V0dGluZ3MiLCJ1cmlzIjpbImh0dHA6Ly9odWJzcG90LmNvbS5zMy5hbWF6b25hd3MuY29tL2J1aWxkX2FydGlmYWN0cy90cWRhc2hfd2ViX3Byb2MvdHFkYXNoX3dlYl9wcm9jLTk0LTIwMTMtMTEtMTBfMTMtMjMtNDgudGFyLmd6P0FXU0FjY2Vzc0tleUlkPTFKQlBWUjNaUktZUlREUDZTNEcyJkV4cGlyZXM9MTQxNTY0NDI3MCZTaWduYXR1cmU9WHlTT1dkRnYwa2xMTXpZZGIyWnFYRWZjTmhJJTNEIiwiaHR0cDovL2h1YnNwb3QuZGVwbG95LmNvbmZpZy5zMy5hbWF6b25hd3MuY29tL3RxZGFzaF93ZWJfcHJvYy85NC9jb25maWcueWFtbD9BV1NBY2Nlc3NLZXlJZD0xSkJQVlIzWlJLWVJURFA2UzRHMiZFeHBpcmVzPTE0MTU2NDQyNzAmU2lnbmF0dXJlPXVVam9qOU9JTGZKYldtVExNUWdDN1o1a1pQMCUzRCJdLCJlbnYiOnsiREVQTE9ZX1BST0pFQ1RfTkFNRSI6InRxZGFzaF93ZWIiLCJERVBMT1lfVVNFUiI6InRwZXRyQGh1YnNwb3QuY29tIn0sInBvcnRzIjpbMzEwMjQsMzEwMjUsMzEwMjZdfQ=="}},{"taskRequest":{"request":{"command":null,"name":"marathon_test:1259:web:1384190886412","executor":"/home/tpetr/mesos/bin/hubspot-mesos-executor","resources":{"cpus":1,"memoryMb":512,"numPorts":3},"schedule":null,"instances":1,"daemon":true,"env":null,"uris":null,"executorData":{"cmd":"java -Xmx1024m -jar ./target/ExampleDropWizardService-2.0-SNAPSHOT.jar server $CONFIG_YAML","uris":["http://hubspot.com.s3.amazonaws.com/build_artifacts/ExampleDropWizardService/ExampleDropWizardService-1259-2013-11-11_03-29-45.tar.gz?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415726886&Signature=I%2Bjrnt3sXmCKZy%2BeNpUg3iTox9U%3D","http://hubspot.deploy.config.s3.amazonaws.com/ExampleDropWizardService/1259/config.yaml?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415726886&Signature=EKpeACUYPvlIo69KgZakHZrMers%3D"],"env":{"DEPLOY_PROJECT_NAME":"marathon_test","DEPLOY_USER":"tpetr@hubspot.com","DEPLOY_ID":"df23e927-3084-4410-a364-8806744a0961","DEPLOY_TIME":"1384190886570"},"ports":[31000,31001,31002]},"rackSensitive":null},"pendingTaskId":{"name":"marathon_test:1259:web:1384190886412","nextRunAt":1384203242324,"instanceNo":1}},"taskId":{"name":"marathon_test:1259:web:1384190886412","instanceNo":1,"rackId":"us-east-1a","startedAt":1384203243858},"offer":{"id":{"value":"201311111611-3792629514-5050-11268-15957"},"frameworkId":{"value":"Singularity_6"},"slaveId":{"value":"201311111611-3792629514-5050-11268-5"},"hostname":"christner.iad01.hubspot-networks.net","resources":[{"name":"cpus","type":"SCALAR","scalar":{"value":20.0},"role":"*"},{"name":"mem","type":"SCALAR","scalar":{"value":5939.0},"role":"*"},{"name":"disk","type":"SCALAR","scalar":{"value":418176.0},"role":"*"},{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31000,"end":32000}]},"role":"*"}],"attributes":[{"name":"rackid","type":"TEXT","text":{"value":"us-east-1a"}}],"executorIds":[]},"task":{"name":"marathon_test:1259:web:1384190886412","taskId":{"value":"marathon_test:1259:web:1384190886412-1384203243858-1-useast1a"},"slaveId":{"value":"201311111611-3792629514-5050-11268-5"},"resources":[{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31000,"end":31003}]}},{"name":"cpus","type":"SCALAR","scalar":{"value":1.0}},{"name":"mem","type":"SCALAR","scalar":{"value":512.0}}],"executor":{"executorId":{"value":"singularity-marathon_test:1259:web:1384190886412-1384203243858-1-useast1a"},"command":{"value":"/home/tpetr/mesos/bin/hubspot-mesos-executor","uris":[]},"resources":[]},"data":"eyJjbWQiOiJqYXZhIC1YbXgxMDI0bSAtamFyIC4vdGFyZ2V0L0V4YW1wbGVEcm9wV2l6YXJkU2VydmljZS0yLjAtU05BUFNIT1QuamFyIHNlcnZlciAkQ09ORklHX1lBTUwiLCJ1cmlzIjpbImh0dHA6Ly9odWJzcG90LmNvbS5zMy5hbWF6b25hd3MuY29tL2J1aWxkX2FydGlmYWN0cy9FeGFtcGxlRHJvcFdpemFyZFNlcnZpY2UvRXhhbXBsZURyb3BXaXphcmRTZXJ2aWNlLTEyNTktMjAxMy0xMS0xMV8wMy0yOS00NS50YXIuZ3o/QVdTQWNjZXNzS2V5SWQ9MUpCUFZSM1pSS1lSVERQNlM0RzImRXhwaXJlcz0xNDE1NzI2ODg2JlNpZ25hdHVyZT1JJTJCanJudDNzWG1DS1p5JTJCZU5wVWczaVRveDlVJTNEIiwiaHR0cDovL2h1YnNwb3QuZGVwbG95LmNvbmZpZy5zMy5hbWF6b25hd3MuY29tL0V4YW1wbGVEcm9wV2l6YXJkU2VydmljZS8xMjU5L2NvbmZpZy55YW1sP0FXU0FjY2Vzc0tleUlkPTFKQlBWUjNaUktZUlREUDZTNEcyJkV4cGlyZXM9MTQxNTcyNjg4NiZTaWduYXR1cmU9RUtwZUFDVVlQdmxJbzY5S2daYWtIWnJNZXJzJTNEIl0sImVudiI6eyJERVBMT1lfUFJPSkVDVF9OQU1FIjoibWFyYXRob25fdGVzdCIsIkRFUExPWV9VU0VSIjoidHBldHJAaHVic3BvdC5jb20iLCJERVBMT1lfSUQiOiJkZjIzZTkyNy0zMDg0LTQ0MTAtYTM2NC04ODA2NzQ0YTA5NjEiLCJERVBMT1lfVElNRSI6IjEzODQxOTA4ODY1NzAifSwicG9ydHMiOlszMTAwMCwzMTAwMSwzMTAwMl19"}},{"taskRequest":{"request":{"command":null,"name":"Gamera:1086:web:1384190422867","executor":"/home/tpetr/mesos/bin/hubspot-mesos-executor","resources":{"cpus":1,"memoryMb":512,"numPorts":3},"schedule":null,"instances":1,"daemon":true,"env":null,"uris":null,"executorData":{"cmd":"java -Xmx1024m -jar target/Gamera-1.0-dw-SNAPSHOT.jar server $CONFIG_YAML","uris":["http://hubspot.com.s3.amazonaws.com/build_artifacts/Gamera/Gamera-1086-2013-11-11_12-09-18.tar.gz?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415726423&Signature=eSmO0RmD7MadhKYqF05beVnqqfw%3D","http://hubspot.deploy.config.s3.amazonaws.com/Gamera/1086/config.yaml?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415726422&Signature=pMXK55CZyfwHEp9zzkWKoTwRzss%3D"],"env":{"DEPLOY_PROJECT_NAME":"Gamera","DEPLOY_USER":"tpetr@hubspot.com","DEPLOY_ID":"715da0b4-3951-4535-88b1-7d0cdc509286","DEPLOY_TIME":"1384190423028"},"ports":[31000,31001,31002]},"rackSensitive":null},"pendingTaskId":{"name":"Gamera:1086:web:1384190422867","nextRunAt":1384199945679,"instanceNo":1}},"taskId":{"name":"Gamera:1086:web:1384190422867","instanceNo":1,"rackId":"us-east-1a","startedAt":1384199946028},"offer":{"id":{"value":"201311111611-3792629514-5050-11268-12711"},"frameworkId":{"value":"Singularity_6"},"slaveId":{"value":"201311111611-3792629514-5050-11268-6"},"hostname":"rampage.iad01.hubspot-networks.net","resources":[{"name":"cpus","type":"SCALAR","scalar":{"value":20.0},"role":"*"},{"name":"mem","type":"SCALAR","scalar":{"value":5939.0},"role":"*"},{"name":"disk","type":"SCALAR","scalar":{"value":418176.0},"role":"*"},{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31000,"end":32000}]},"role":"*"}],"attributes":[{"name":"rackid","type":"TEXT","text":{"value":"us-east-1a"}}],"executorIds":[]},"task":{"name":"Gamera:1086:web:1384190422867","taskId":{"value":"Gamera:1086:web:1384190422867-1384199946028-1-useast1a"},"slaveId":{"value":"201311111611-3792629514-5050-11268-6"},"resources":[{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31000,"end":31003}]}},{"name":"cpus","type":"SCALAR","scalar":{"value":1.0}},{"name":"mem","type":"SCALAR","scalar":{"value":512.0}}],"executor":{"executorId":{"value":"singularity-Gamera:1086:web:1384190422867-1384199946028-1-useast1a"},"command":{"value":"/home/tpetr/mesos/bin/hubspot-mesos-executor","uris":[]},"resources":[]},"data":"eyJjbWQiOiJqYXZhIC1YbXgxMDI0bSAtamFyIHRhcmdldC9HYW1lcmEtMS4wLWR3LVNOQVBTSE9ULmphciBzZXJ2ZXIgJENPTkZJR19ZQU1MIiwidXJpcyI6WyJodHRwOi8vaHVic3BvdC5jb20uczMuYW1hem9uYXdzLmNvbS9idWlsZF9hcnRpZmFjdHMvR2FtZXJhL0dhbWVyYS0xMDg2LTIwMTMtMTEtMTFfMTItMDktMTgudGFyLmd6P0FXU0FjY2Vzc0tleUlkPTFKQlBWUjNaUktZUlREUDZTNEcyJkV4cGlyZXM9MTQxNTcyNjQyMyZTaWduYXR1cmU9ZVNtTzBSbUQ3TWFkaEtZcUYwNWJlVm5xcWZ3JTNEIiwiaHR0cDovL2h1YnNwb3QuZGVwbG95LmNvbmZpZy5zMy5hbWF6b25hd3MuY29tL0dhbWVyYS8xMDg2L2NvbmZpZy55YW1sP0FXU0FjY2Vzc0tleUlkPTFKQlBWUjNaUktZUlREUDZTNEcyJkV4cGlyZXM9MTQxNTcyNjQyMiZTaWduYXR1cmU9cE1YSzU1Q1p5ZndIRXA5enprV0tvVHdSenNzJTNEIl0sImVudiI6eyJERVBMT1lfUFJPSkVDVF9OQU1FIjoiR2FtZXJhIiwiREVQTE9ZX1VTRVIiOiJ0cGV0ckBodWJzcG90LmNvbSIsIkRFUExPWV9JRCI6IjcxNWRhMGI0LTM5NTEtNDUzNS04OGIxLTdkMGNkYzUwOTI4NiIsIkRFUExPWV9USU1FIjoiMTM4NDE5MDQyMzAyOCJ9LCJwb3J0cyI6WzMxMDAwLDMxMDAxLDMxMDAyXX0="}},{"taskRequest":{"request":{"command":null,"name":"WaterfallService:1028:web:1384198454854","executor":"/home/tpetr/mesos/bin/hubspot-mesos-executor","resources":{"cpus":1,"memoryMb":512,"numPorts":3},"schedule":null,"instances":2,"daemon":true,"env":null,"uris":null,"executorData":{"cmd":"java -Xmx1g -Djava.net.preferIPv4Stack=true -jar $JAR_NAME server $CONFIG_YAML","uris":["http://hubspot.com.s3.amazonaws.com/build_artifacts/Waterfall/Waterfall-1028-2013-11-07_13-55-15.tar.gz?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415734455&Signature=ManP9yLeW367bu7sJyCqatvlA7s%3D","http://hubspot.deploy.config.s3.amazonaws.com/Waterfall/1028/config.yaml?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415734454&Signature=o1GImmPU6wGNHPMUiHt6Kw%2BiOZE%3D"],"env":{"DEPLOY_PROJECT_NAME":"WaterfallService","DEPLOY_USER":"tpetr@hubspot.com","DEPLOY_ID":"92e03042-9116-46c7-b5ba-8060fe93d52e","DEPLOY_TIME":"1384198455005"},"ports":[31004,31005,31006]},"rackSensitive":null},"pendingTaskId":{"name":"WaterfallService:1028:web:1384198454854","nextRunAt":1384198457671,"instanceNo":2}},"taskId":{"name":"WaterfallService:1028:web:1384198454854","instanceNo":2,"rackId":"us-east-1b","startedAt":1384198457753},"offer":{"id":{"value":"201311111611-3792629514-5050-11268-11106"},"frameworkId":{"value":"Singularity_6"},"slaveId":{"value":"201311111611-3792629514-5050-11268-1"},"hostname":"hodge.iad01.hubspot-networks.net","resources":[{"name":"cpus","type":"SCALAR","scalar":{"value":17.0},"role":"*"},{"name":"mem","type":"SCALAR","scalar":{"value":4403.0},"role":"*"},{"name":"disk","type":"SCALAR","scalar":{"value":418176.0},"role":"*"},{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31004,"end":31015},{"begin":31024,"end":32000}]},"role":"*"}],"executorIds":[{"value":"singularity-deployer_ui:80:web:1384190642340-1384190644771-1-useast1b"},{"value":"singularity-WaterfallService:1028:web:1384188715142-1384188722151-1-useast1b"},{"value":"singularity-marathon_test:1259:web:1384190886412-1384190890006-1-useast1b"}],"attributes":[{"name":"rackid","type":"TEXT","text":{"value":"us-east-1b"}}]},"task":{"name":"WaterfallService:1028:web:1384198454854","taskId":{"value":"WaterfallService:1028:web:1384198454854-1384198457753-2-useast1b"},"slaveId":{"value":"201311111611-3792629514-5050-11268-1"},"resources":[{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31004,"end":31007}]}},{"name":"cpus","type":"SCALAR","scalar":{"value":1.0}},{"name":"mem","type":"SCALAR","scalar":{"value":512.0}}],"executor":{"executorId":{"value":"singularity-WaterfallService:1028:web:1384198454854-1384198457753-2-useast1b"},"command":{"value":"/home/tpetr/mesos/bin/hubspot-mesos-executor","uris":[]},"resources":[]},"data":"eyJjbWQiOiJqYXZhIC1YbXgxZyAtRGphdmEubmV0LnByZWZlcklQdjRTdGFjaz10cnVlIC1qYXIgJEpBUl9OQU1FIHNlcnZlciAkQ09ORklHX1lBTUwiLCJ1cmlzIjpbImh0dHA6Ly9odWJzcG90LmNvbS5zMy5hbWF6b25hd3MuY29tL2J1aWxkX2FydGlmYWN0cy9XYXRlcmZhbGwvV2F0ZXJmYWxsLTEwMjgtMjAxMy0xMS0wN18xMy01NS0xNS50YXIuZ3o/QVdTQWNjZXNzS2V5SWQ9MUpCUFZSM1pSS1lSVERQNlM0RzImRXhwaXJlcz0xNDE1NzM0NDU1JlNpZ25hdHVyZT1NYW5QOXlMZVczNjdidTdzSnlDcWF0dmxBN3MlM0QiLCJodHRwOi8vaHVic3BvdC5kZXBsb3kuY29uZmlnLnMzLmFtYXpvbmF3cy5jb20vV2F0ZXJmYWxsLzEwMjgvY29uZmlnLnlhbWw/QVdTQWNjZXNzS2V5SWQ9MUpCUFZSM1pSS1lSVERQNlM0RzImRXhwaXJlcz0xNDE1NzM0NDU0JlNpZ25hdHVyZT1vMUdJbW1QVTZ3R05IUE1VaUh0Nkt3JTJCaU9aRSUzRCJdLCJlbnYiOnsiREVQTE9ZX1BST0pFQ1RfTkFNRSI6IldhdGVyZmFsbFNlcnZpY2UiLCJERVBMT1lfVVNFUiI6InRwZXRyQGh1YnNwb3QuY29tIiwiREVQTE9ZX0lEIjoiOTJlMDMwNDItOTExNi00NmM3LWI1YmEtODA2MGZlOTNkNTJlIiwiREVQTE9ZX1RJTUUiOiIxMzg0MTk4NDU1MDA1In0sInBvcnRzIjpbMzEwMDQsMzEwMDUsMzEwMDZdfQ=="}},{"taskRequest":{"request":{"command":null,"name":"WaterfallService:1028:web:1384198454854","executor":"/home/tpetr/mesos/bin/hubspot-mesos-executor","resources":{"cpus":1,"memoryMb":512,"numPorts":3},"schedule":null,"instances":2,"daemon":true,"env":null,"uris":null,"executorData":{"cmd":"java -Xmx1g -Djava.net.preferIPv4Stack=true -jar $JAR_NAME server $CONFIG_YAML","uris":["http://hubspot.com.s3.amazonaws.com/build_artifacts/Waterfall/Waterfall-1028-2013-11-07_13-55-15.tar.gz?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415734455&Signature=ManP9yLeW367bu7sJyCqatvlA7s%3D","http://hubspot.deploy.config.s3.amazonaws.com/Waterfall/1028/config.yaml?AWSAccessKeyId=1JBPVR3ZRKYRTDP6S4G2&Expires=1415734454&Signature=o1GImmPU6wGNHPMUiHt6Kw%2BiOZE%3D"],"env":{"DEPLOY_PROJECT_NAME":"WaterfallService","DEPLOY_USER":"tpetr@hubspot.com","DEPLOY_ID":"92e03042-9116-46c7-b5ba-8060fe93d52e","DEPLOY_TIME":"1384198455005"},"ports":[31004,31005,31006]},"rackSensitive":null},"pendingTaskId":{"name":"WaterfallService:1028:web:1384198454854","nextRunAt":1384198457671,"instanceNo":1}},"taskId":{"name":"WaterfallService:1028:web:1384198454854","instanceNo":1,"rackId":"us-east-1e","startedAt":1384198457700},"offer":{"id":{"value":"201311111611-3792629514-5050-11268-11105"},"frameworkId":{"value":"Singularity_6"},"slaveId":{"value":"201311111611-3792629514-5050-11268-3"},"hostname":"nicholas.iad01.hubspot-networks.net","resources":[{"name":"cpus","type":"SCALAR","scalar":{"value":19.0},"role":"*"},{"name":"mem","type":"SCALAR","scalar":{"value":5427.0},"role":"*"},{"name":"disk","type":"SCALAR","scalar":{"value":418176.0},"role":"*"},{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31004,"end":32000}]},"role":"*"}],"executorIds":[{"value":"singularity-KumongaService:2665:web:1384190786065-1384190786908-1-useast1e"}],"attributes":[{"name":"rackid","type":"TEXT","text":{"value":"us-east-1e"}}]},"task":{"name":"WaterfallService:1028:web:1384198454854","taskId":{"value":"WaterfallService:1028:web:1384198454854-1384198457700-1-useast1e"},"slaveId":{"value":"201311111611-3792629514-5050-11268-3"},"resources":[{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":31004,"end":31007}]}},{"name":"cpus","type":"SCALAR","scalar":{"value":1.0}},{"name":"mem","type":"SCALAR","scalar":{"value":512.0}}],"executor":{"executorId":{"value":"singularity-WaterfallService:1028:web:1384198454854-1384198457700-1-useast1e"},"command":{"value":"/home/tpetr/mesos/bin/hubspot-mesos-executor","uris":[]},"resources":[]},"data":"eyJjbWQiOiJqYXZhIC1YbXgxZyAtRGphdmEubmV0LnByZWZlcklQdjRTdGFjaz10cnVlIC1qYXIgJEpBUl9OQU1FIHNlcnZlciAkQ09ORklHX1lBTUwiLCJ1cmlzIjpbImh0dHA6Ly9odWJzcG90LmNvbS5zMy5hbWF6b25hd3MuY29tL2J1aWxkX2FydGlmYWN0cy9XYXRlcmZhbGwvV2F0ZXJmYWxsLTEwMjgtMjAxMy0xMS0wN18xMy01NS0xNS50YXIuZ3o/QVdTQWNjZXNzS2V5SWQ9MUpCUFZSM1pSS1lSVERQNlM0RzImRXhwaXJlcz0xNDE1NzM0NDU1JlNpZ25hdHVyZT1NYW5QOXlMZVczNjdidTdzSnlDcWF0dmxBN3MlM0QiLCJodHRwOi8vaHVic3BvdC5kZXBsb3kuY29uZmlnLnMzLmFtYXpvbmF3cy5jb20vV2F0ZXJmYWxsLzEwMjgvY29uZmlnLnlhbWw/QVdTQWNjZXNzS2V5SWQ9MUpCUFZSM1pSS1lSVERQNlM0RzImRXhwaXJlcz0xNDE1NzM0NDU0JlNpZ25hdHVyZT1vMUdJbW1QVTZ3R05IUE1VaUh0Nkt3JTJCaU9aRSUzRCJdLCJlbnYiOnsiREVQTE9ZX1BST0pFQ1RfTkFNRSI6IldhdGVyZmFsbFNlcnZpY2UiLCJERVBMT1lfVVNFUiI6InRwZXRyQGh1YnNwb3QuY29tIiwiREVQTE9ZX0lEIjoiOTJlMDMwNDItOTExNi00NmM3LWI1YmEtODA2MGZlOTNkNTJlIiwiREVQTE9ZX1RJTUUiOiIxMzg0MTk4NDU1MDA1In0sInBvcnRzIjpbMzEwMDQsMzEwMDUsMzEwMDZdfQ=="}}]

class TasksActive extends Tasks

    #url: "http://#{env.SINGULARITY_BASE}/#{constants.api_base}/task/active"
    url: => "https://#{env.INTERNAL_BASE}/#{constants.kumonga_api_base}/users/#{app.login.context.user.email}/settings"

    parse: (tasks) ->
        tasks = MOCK_JSON

        _.each tasks, (task, i) =>
            task.id = task.task.taskId.value
            task.name = task.id
            task.label = @parseLabelFromName task.task.name
            task.resourcesCount = task.task.resources.length
            task.startedAt = task.taskId.startedAt
            task.startedAtHuman = moment(task.taskId.startedAt).from()
            tasks[i] = task

        tasks

    comparator: 'name'

module.exports = TasksActive